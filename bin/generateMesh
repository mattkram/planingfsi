#!/usr/bin/python

import planingfsi.config as config
import planingfsi.unit as unit
import planingfsi.krampy as kp

from planingfsi.fe.femesh import Mesh

import os
import sys

if os.environ.get('DISPLAY') is None:
    import matplotlib as mpl
    mpl.use('Agg')

import numpy as np

# Process input arguments
plotShow = False
plotSave = False
disp = False
for arg in sys.argv[1:]:
    if not arg[0] == '-':
        config.mesh_dict_dir = arg
    if arg == '-show' or arg == 'show':
        plotShow = True
    if arg == '-save' or arg == 'save':
        plotSave = True
    if arg == '-print' or arg == 'print':
        disp = True

# Create mesh
mesh = Mesh()

# Process mesh dictionary
execfile(config.mesh_dict_dir)

# Display, plot, and write mesh files
mesh.display(disp=disp)
mesh.plot(show=plotShow, save=plotSave)
mesh.write()
