#!/usr/bin/env python

import os
import sys

filename = sys.argv[1]
varname = sys.argv[2]
newval = sys.argv[3]

with open(filename, 'rb') as ff, open(filename+'.tmp', 'w') as gg:
    for line in ff:
        if not line.strip().startswith('#') and not line.strip() == '':
            split = [s.strip() for s in line.split(':')]
            if len(split) == 2 and split[0] == varname:
                line = line.replace(split[1], newval)
        gg.write(line)

os.system('mv {0}.tmp {0}'.format(filename))
