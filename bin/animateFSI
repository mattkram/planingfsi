#!/usr/bin/python

# Add subfolder for potential code to python path
import numpy as np
import krampy as kp
import os, sys
from fnmatch import fnmatch

if len(sys.argv) > 1:
  fps = sys.argv[1]
else:
  fps = 25

# Load all case directories that match format
baseDir = '.'

mf = ''.join(f+',' for f in [os.path.join('figures', f) 
                               for f in kp.sortDirByNum([f for f in os.listdir(os.path.join(baseDir, 'figures')) if fnmatch(f, '*.png')])[0]]).strip(',')

command = ('mencoder',
           'mf://' + mf,
           '-mf',
           'type=png:w=800:h=600:fps='+str(fps),
           '-ovc',
           'lavc',
           '-lavcopts',
           'vcodec=mpeg4',
           '-oac',
           'copy',
           '-o',
           'movie.avi')
os.spawnvp(os.P_WAIT, 'mencoder', command)

