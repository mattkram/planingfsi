#!/usr/bin/python

import planingfsi.config as config
import planingfsi.krampy as kp
from planingfsi.fsi.fsisimulation import Simulation

import os
import sys

if os.environ.get('DISPLAY') is None:
    import matplotlib as mpl
    mpl.use('Agg')

# Process command line arguments
for arg in sys.argv[1:]:
    if 'post' in arg:
        print 'Running in post-processing mode'
        config.plotSave = True
        config.plot = True
        config.resultsFromFile = True
    if 'plotSave' in arg:
        config.plotSave = True
        config.plot = True
    if 'new' in arg:
        kp.rm_rf(kp.find_files(config.caseDir, '[0-9]*'))

# Create simulation
sim = Simulation()

# Run simulation
sim.run()
